/*!
 * linkhunter - v3.1.2
 * Detect links that real users actually type.
 * https://github.com/Zhouzi/linkhunter
 *
 * @author Gabin Aureche
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.linkhunter=t():e.linkhunter=t()}(this,function(){function e(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function t(e,t,n){return null==t&&(t=e.length),null==n&&(n="..."),e.length<=t?e:e.substr(0,t-n.length)+n}function n(e){return b.email.test(e)}function r(e,t){return null==t&&(t=!1),!t&&n(e)?!1:b.link.test(e)}function l(e,t){null==t&&(t=!1);var r=[];return e.replace(b.links,function(e,t,n){r.push(n)}),t?r:r.filter(function(e){return!n(e)})}function i(e,t){return e.replace(b.links,function(e,n,r){return n+t(r)})}function o(t,r){null==r&&(r={});var l={ignoreEmail:!1,target:null,protocol:"http://",displayValue:e({cleanUp:!1,beautify:!1,shorten:!1},r.displayValue||{})};r=e(l,r);var o,u,c=r.target?'<a href="{{formatted}}" target="'+r.target+'">{{displayValue}}</a>':'<a href="{{formatted}}">{{displayValue}}</a>';return i(t,function(e){return o=n(e),r.ignoreEmail&&o?e:(u=e,r.displayValue.cleanUp&&(u=s(u)),r.displayValue.beautify&&(u=f(u)),r.displayValue.shorten&&(u=p(u,r.displayValue.shorten)),r.displayValue.withProtocol&&(u=a(u,r.protocol)),o?'<a href="'+a(e)+'">'+u+"</a>":c.replace("{{formatted}}",a(e,r.protocol)).replace("{{displayValue}}",u))})}function u(e){return n(e)?/^mailto:/i.test(e):/^https?:\/\//i.test(e)}function a(e,t){return null==t&&(t="http://"),n(e)&&(t="mailto:"),u(e)?e:t+e}function s(e,t){if(null==t&&(t=!1),t){var n=e.lastIndexOf("?");n>=0&&(e=e.substr(0,n))}return e=e.replace(/^https?:\/\//i,"").replace(/\/#?$/,"")}function p(e,n){return t(e,n)}function f(e,t){if(null==t&&(t=!0),n(e))return e;if(e=s(e,t),e.indexOf("/")<0)return e;var r=e.split("/");return r.length>2?r.shift()+"/.../"+r.pop():r.shift()+"/"+r.pop()}var c="(){}\"'",h=".!?:,;",d="(?=["+c+h+"]*)",g="([\\s"+c+h+"]*)",y="(?:[^\\s]*[^\\s"+c+h+"])?",k="(?:[-a-z0-9]{1,255}\\.)+[a-z]{2,10}",m="(?:mailto:)?[^\\s"+c+h.substr(1)+"]+@"+k,x="https?://"+k+"(?:/"+y+")?",V=k+"(?:/"+y+")?",b={email:new RegExp("^"+m+"$","i"),regularUrl:new RegExp("^"+x,"i"),userUrl:new RegExp("^"+V,"i"),link:new RegExp("^((?:"+m+")|(?:"+x+")|(?:"+V+"))$","i"),links:new RegExp(g+"((?:"+x+")|(?:(?:"+m+")|(?:"+V+"))"+d+")","gi")};return{regexps:b,looksLikeAnEmail:n,looksLikeALink:r,getLinks:l,replaceLinks:i,linky:o,hasProtocol:u,withProtocol:a,cleanUp:s,shorten:p,beautify:f}});