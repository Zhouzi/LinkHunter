/*!
 * linkhunter - v4.0.0
 * Detect links that real users actually type.
 * https://github.com/Zhouzi/linkhunter
 *
 * @author Gabin Aureche
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.linkhunter=t():e.linkhunter=t()}(this,function(){function e(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function t(e){return V.email.test(e)}function n(e,n){return null==n&&(n=!1),!n&&t(e)?!1:V.link.test(e)}function r(e,n){null==n&&(n=!1);var r=[];return e.replace(V.links,function(e,t,n){r.push(n)}),n?r:r.filter(function(e){return!t(e)})}function l(e,t){return e.replace(V.links,function(e,n,r){return n+t(r)})}function i(n,r){null==r&&(r={});var i={ignoreEmail:!1,target:null,protocol:"http://",displayValue:e({cleanUp:!1,beautify:!1,shorten:!1},r.displayValue||{})};r=e(i,r);var a,f,c=r.target?'<a href="{{formatted}}" target="'+r.target+'">{{displayValue}}</a>':'<a href="{{formatted}}">{{displayValue}}</a>';return l(n,function(e){return a=t(e),r.ignoreEmail&&a?e:(f=e,r.displayValue.cleanUp&&(f=u(f)),r.displayValue.beautify&&(f=p(f)),r.displayValue.shorten&&(f=s(f,r.displayValue.shorten)),r.displayValue.withProtocol&&(f=o(f,r.protocol)),a?'<a href="'+o(e)+'">'+f+"</a>":c.replace("{{formatted}}",o(e,r.protocol)).replace("{{displayValue}}",f))})}function a(e){return t(e)?/^mailto:/i.test(e):/^https?:\/\//i.test(e)}function o(e,n){return null==n&&(n="http://"),t(e)&&(n="mailto:"),a(e)?e:n+e}function u(e,t){if(null==t&&(t=!1),t){var n=e.lastIndexOf("?");n>=0&&(e=e.substr(0,n))}return e=e.replace(/^https?:\/\//i,"").replace(/\/#?$/,"")}function s(e,t){if(null==t)return e;if(e.length<=t)return e;var n="...";return e.substr(0,t-n.length)+n}function p(e,n){if(null==n&&(n=!0),t(e))return e;if(e=u(e,n),e.indexOf("/")<0)return e;var r=e.split("/");return r.length>2?r.shift()+"/.../"+r.pop():r.shift()+"/"+r.pop()}var f="(){}\"'",c=".!?:,;",h="(?=["+f+c+"]*)",d="([\\s"+f+c+"]*)",y="(?:[^\\s]*[^\\s"+f+c+"])?",g="(?:[-a-z0-9]{1,255}\\.)+[a-z]{2,10}",k="(?:mailto:)?[^\\s"+f+c.substr(1)+"]+@"+g,m="https?://"+g+"(?:/"+y+")?",x=g+"(?:/"+y+")?",V={email:new RegExp("^"+k+"$","i"),regularUrl:new RegExp("^"+m,"i"),userUrl:new RegExp("^"+x,"i"),link:new RegExp("^((?:"+k+")|(?:"+m+")|(?:"+x+"))$","i"),links:new RegExp(d+"((?:"+m+")|(?:(?:"+k+")|(?:"+x+"))"+h+")","gi")};return{regexps:V,looksLikeAnEmail:t,looksLikeALink:n,getLinks:r,replaceLinks:l,linky:i,hasProtocol:a,withProtocol:o,cleanUp:u,shorten:s,beautify:p}});